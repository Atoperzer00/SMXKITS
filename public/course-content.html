<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SMX KITS - Course Content</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
      --secondary-gradient: linear-gradient(135deg, #ff8c42 0%, #ff6b35 100%);
      --accent-gradient: linear-gradient(135deg, #ffa726 0%, #ff9800 100%);
      --dark-gradient: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 100%);
      --card-gradient: linear-gradient(145deg, #2d1810 0%, #1a0f08 100%);
      --glass-bg: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
      --text-primary: #ffffff;
      --text-secondary: #b8c5d6;
      --text-accent: #ffa726;
      --shadow-primary: 0 20px 40px rgba(0, 0, 0, 0.3);
      --shadow-hover: 0 30px 60px rgba(0, 0, 0, 0.4);
      --border-radius: 20px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--dark-gradient);
      color: var(--text-primary);
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* Animated background particles */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 80%, rgba(255, 107, 53, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(247, 147, 30, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(255, 140, 66, 0.1) 0%, transparent 50%);
      z-index: -1;
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-20px) rotate(1deg); }
      66% { transform: translateY(10px) rotate(-1deg); }
    }

    .course-layout {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .course-sidebar {
      width: 280px;
      background: rgba(15, 20, 25, 0.95);
      backdrop-filter: blur(20px);
      border-right: 1px solid var(--glass-border);
      display: flex;
      flex-direction: column;
      padding: 2rem 0;
      position: relative;
      overflow: hidden;
    }

    .course-sidebar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(180deg, rgba(255, 107, 53, 0.1) 0%, transparent 100%);
      z-index: -1;
    }

    .course-logo {
      width: 200px;
      margin: 0 auto 3rem;
      filter: drop-shadow(0 10px 30px rgba(255, 107, 53, 0.3));
      transition: var(--transition);
    }

    .course-nav {
      list-style: none;
      padding: 0 1rem;
    }

    .course-nav li {
      margin-bottom: 0.5rem;
      padding: 1rem 1.5rem;
      border-radius: 15px;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .course-nav li::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--primary-gradient);
      transition: var(--transition);
      z-index: -1;
    }

    .course-nav li:hover::before,
    .course-nav li.active::before {
      left: 0;
    }

    .course-nav li:hover,
    .course-nav li.active {
      color: white;
      transform: translateX(5px);
      box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
    }

    /* Main Content */
    .course-content {
      flex: 1;
      padding: 2rem;
      background: transparent;
      overflow-y: auto;
    }

    .course-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 3rem;
      padding: 2rem;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: var(--border-radius);
      border: 1px solid var(--glass-border);
      box-shadow: var(--shadow-primary);
    }

    .course-title {
      font-size: 3rem;
      font-weight: 800;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0;
      letter-spacing: -0.02em;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.5rem;
      background: var(--glass-bg);
      border-radius: 50px;
      border: 1px solid var(--glass-border);
    }

    .user-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--accent-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
    }

    /* Slide Container */
    .slide-container {
      position: relative;
      width: 100%;
      height: 70vh;
      background: var(--card-gradient);
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow-primary);
      border: 1px solid var(--glass-border);
      margin-bottom: 2rem;
    }
    
    .slide-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: var(--transition);
    }
    
    .slide-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(20px);
    }
    
    .slide-control-btn {
      background: var(--primary-gradient);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 0.75rem 2rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .slide-control-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    .slide-control-btn:disabled {
      background: rgba(255, 255, 255, 0.1);
      cursor: not-allowed;
      transform: none;
    }
    
    .slide-counter {
      color: white;
      font-size: 1.1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--glass-bg);
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      border: 1px solid var(--glass-border);
    }

    /* Module Selector */
    .module-selector {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: var(--border-radius);
      padding: 2rem;
      margin-bottom: 2rem;
      border: 1px solid var(--glass-border);
      box-shadow: var(--shadow-primary);
    }

    .module-select {
      background: var(--card-gradient);
      color: var(--text-primary);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      font-size: 1rem;
      font-weight: 500;
      width: 100%;
      max-width: 400px;
      cursor: pointer;
      transition: var(--transition);
    }

    .module-select:focus {
      outline: none;
      border-color: rgba(255, 107, 53, 0.5);
      box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
    }

    .module-select option {
      background: #1a1a2e;
      color: #000000;
    }

    /* Instructor Notes */
    .instructor-notes {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: var(--border-radius);
      border: 1px solid var(--glass-border);
      box-shadow: var(--shadow-primary);
      margin-bottom: 2rem;
      overflow: hidden;
      transition: var(--transition);
    }

    .notes-header {
      padding: 1.5rem 2rem;
      background: var(--card-gradient);
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: var(--transition);
    }

    .notes-header:hover {
      background: linear-gradient(145deg, #3d2818 0%, #2a1510 100%);
    }

    .notes-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--text-accent);
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .notes-toggle {
      font-size: 1.2rem;
      color: var(--text-accent);
      transition: var(--transition);
    }

    .notes-content {
      padding: 0 2rem;
      max-height: 0;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .notes-content.expanded {
      padding: 2rem;
      max-height: 500px;
    }

    .note-item {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      border-left: 4px solid var(--accent-gradient);
    }

    .note-item:last-child {
      margin-bottom: 0;
    }

    .note-title {
      font-weight: 600;
      color: var(--text-accent);
      margin-bottom: 0.5rem;
    }

    .note-text {
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* Additional Resources */
    .resources-section {
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border-radius: var(--border-radius);
      padding: 2rem;
      border: 1px solid var(--glass-border);
      box-shadow: var(--shadow-primary);
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
      color: var(--text-accent);
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .section-title::before {
      content: '';
      width: 4px;
      height: 30px;
      background: var(--accent-gradient);
      border-radius: 2px;
    }

    .resources-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .resource-card {
      background: var(--card-gradient);
      border-radius: 15px;
      padding: 1.5rem;
      border: 1px solid var(--glass-border);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .resource-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-hover);
      border-color: rgba(255, 107, 53, 0.3);
    }

    .resource-icon {
      font-size: 2rem;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--accent-gradient);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-gradient);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .course-layout {
        flex-direction: column;
      }
      
      .course-sidebar {
        width: 100%;
        height: auto;
      }
      
      .course-content {
        padding: 1rem;
      }
      
      .course-title {
        font-size: 2rem;
      }
      
      .course-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }
      
      .slide-container {
        height: 50vh;
      }

      .slide-controls {
        flex-direction: column;
        gap: 1rem;
      }
    }
  </style>
</head>
<body>
  <!-- Authentication Check -->
  <script>
    // Immediate authentication check
    const token = localStorage.getItem('token');
    const role = localStorage.getItem('role');
    
    if (!token || !role) {
      // No authentication found, redirect immediately
      window.location.replace('/login.html');
      // Stop execution to prevent content from loading
      throw new Error('Authentication required');
    }
    
    // We are authenticated, continue loading
    console.log('✅ Authentication verified - loading course content');
  </script>

  <div class="course-layout">
    <!-- Sidebar -->
    <aside class="course-sidebar">
      <img src="SMXKITS.png" alt="SMXKITS Logo" class="course-logo" />
      <ul class="course-nav">
        <li onclick="window.location.href='dashboard.html'"><i class="fas fa-tachometer-alt"></i> Dashboard</li>
        <li class="active"><i class="fas fa-book-open"></i> Course Content</li>
        <li onclick="window.location.href='mission-links.html'"><i class="fas fa-rocket"></i> Live PED Exercise</li>
        <li onclick="window.location.href='keyboard-training.html'"><i class="fas fa-keyboard"></i> Keyboard Training</li>
        <li onclick="window.location.href='Screener Training.html'"><i class="fas fa-user-shield"></i> Screener Training</li>
        <li onclick="window.location.href='IA Training.html'"><i class="fas fa-satellite-dish"></i> IA Training</li>
        <li onclick="window.location.href='student-grading.html'"><i class="fas fa-clipboard-list"></i> Grading</li>
        <li onclick="window.location.href='schedule.html'"><i class="fas fa-calendar-alt"></i> Schedule</li>
        <li onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</li>
      </ul>
    </aside>

    <!-- Main Content -->
    <main class="course-content">
      <!-- Header -->
      <div class="course-header">
        <h1 class="course-title">INTRODUCTION TO FMV</h1>
        <div class="user-info">
          <div class="user-avatar" id="userAvatar">S</div>
          <span id="studentName">Student</span>
        </div>
      </div>

      <!-- Module Selector -->
      <div class="module-selector">
        <label for="moduleSelect" class="section-title">
          <i class="fas fa-layer-group"></i>
          Select Training Module
        </label>
        <select id="moduleSelect" class="module-select">
          <option value="fmv">INTRODUCTION TO FMV</option>
          <option value="f3ead">F3EAD</option>
        </select>
      </div>
      
      <!-- Slide Viewer -->
      <div class="slide-container">
        <img id="currentSlide" class="slide-image" src="" alt="Current Slide" />
        <div class="slide-controls">
          <button id="prevSlide" class="slide-control-btn">
            <i class="fas fa-chevron-left"></i>
            Previous
          </button>
          <div class="slide-counter">
            <i class="fas fa-images"></i>
            Slide <span id="currentSlideNum">1</span> of <span id="totalSlides">20</span>
          </div>
          <button id="nextSlide" class="slide-control-btn">
            Next
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>

      <!-- Instructor Notes -->
      <div class="instructor-notes">
        <div class="notes-header" onclick="toggleNotes()">
          <div class="notes-title">
            <i class="fas fa-sticky-note"></i>
            Instructor Notes
          </div>
          <i class="fas fa-chevron-down notes-toggle" id="notesToggle"></i>
        </div>
        <div class="notes-content" id="notesContent">
          <div class="note-item">
            <div class="note-title">Slide 1</div>
            <div class="note-text">Instructor notes will go here</div>
          </div>
          <div class="note-item">
            <div class="note-title">Slide 2</div>
            <div class="note-text">Instructor notes will go here</div>
          </div>
          <div class="note-item">
            <div class="note-title">Slide 3</div>
            <div class="note-text">Instructor notes will go here</div>
          </div>
          <div class="note-item">
            <div class="note-title">Slide 4</div>
            <div class="note-text">Instructor notes will go here</div>
          </div>
          <div class="note-item">
            <div class="note-title">Slide 5</div>
            <div class="note-text">Instructor notes will go here</div>
          </div>
        </div>
      </div>
      

    </main>
  </div>

  <!-- JavaScript for Course Content -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Set student name and avatar if available
      const studentName = localStorage.getItem('studentName') || 'Student';
      document.getElementById('studentName').textContent = studentName;
      document.getElementById('userAvatar').textContent = studentName.charAt(0).toUpperCase();

      // Slide configuration for different modules
      const modules = {
        fmv: {
          title: 'INTRODUCTION TO FMV',
          slideCount: 20,
          basePath: 'INTRODUCTION TO FMV/',
          slides: [
            'SLIDE 1.jpg',
            'SLIDE 2.jpg',
            'SLIDE 3.jpg',
            'SLIDE 4.jpg',
            'SLIDE 5.jpg',
            'SLIDE 6.jpg',
            'SLIDE 7.jpg',
            'SLIDE 8.jpg',
            'SLIDE 9.jpg',
            'SLIDE 10.jpg',
            'SLIDE 11.jpg',
            'SLIDE 12.jpg',
            'SLIDE 13.jpg',
            'SLIDE 14.jpg',
            'SLIDE 15.jpg',
            'SLIDE 16.jpg',
            'SLIDE 17.jpg',
            'SLIDE 18.jpg',
            'SLIDE 19.jpg',
            'SLIDE 20.jpg'
          ]
        },
        f3ead: {
          title: 'F3EAD',
          slideCount: 37,
          basePath: 'F3EAD/F3EAD/',
          slides: [
            'SLIDE 1.jpg',
            'SLIDE 2.jpg',
            'SLIDE 3.jpg',
            'SLIDE 4.jpg',
            'SLIDE 5.jpg',
            'SLIDE 6.jpg',
            'SLIDE 7.jpg',
            'SLIDE 8.jpg',
            'SLIDE 9.jpg',
            'SLIDE 10.jpg',
            'SLIDE 11.jpg',
            'SLIDE 12.jpg',
            'SLIDE 13.jpg',
            'SLIDE 14.jpg',
            'SLIDE 15.jpg',
            'SLIDE 16.jpg',
            'SLIDE 17.jpg',
            'SLIDE 18.jpg',
            'SLIDE 19.jpg',
            'SLIDE 20.jpg',
            'SLIDE 21.jpg',
            'SLIDE 22.jpg',
            'SLIDE 23.jpg',
            'SLIDE 24.jpg',
            'SLIDE 25.jpg',
            'SLIDE 26.jpg',
            'SLIDE 27.jpg',
            'SLIDE 28.jpg',
            'SLIDE 29.jpg',
            'SLIDE 30.jpg',
            'SLIDE 31.jpg',
            'SLIDE 32.jpg',
            'SLIDE 33.jpg',
            'SLIDE 34.jpg',
            'SLIDE 35.jpg',
            'SLIDE 36.jpg',
            'SLIDE 37.jpg'
          ]
        }
      };

      // Current state
      let currentModule = 'fmv';
      let currentSlide = 1;
      
      // DOM elements
      const currentSlideEl = document.getElementById('currentSlide');
      const currentSlideNumEl = document.getElementById('currentSlideNum');
      const totalSlidesEl = document.getElementById('totalSlides');
      const moduleSelectEl = document.getElementById('moduleSelect');
      const prevBtn = document.getElementById('prevSlide');
      const nextBtn = document.getElementById('nextSlide');
      
      // Initialize the viewer
      updateModuleInfo();
      updateSlideDisplay();
      
      // Event Listeners
      moduleSelectEl.addEventListener('change', function() {
        currentModule = this.value;
        currentSlide = 1;
        updateModuleInfo();
        updateSlideDisplay();
        updateCourseTitle();
      });
      
      prevBtn.addEventListener('click', function() {
        if (currentSlide > 1) {
          currentSlide--;
          updateSlideDisplay();
        }
      });
      
      nextBtn.addEventListener('click', function() {
        if (currentSlide < modules[currentModule].slideCount) {
          currentSlide++;
          updateSlideDisplay();
        }
      });
      
      // Key navigation
      document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft' && currentSlide > 1) {
          prevBtn.click();
        } else if (e.key === 'ArrowRight' && currentSlide < modules[currentModule].slideCount) {
          nextBtn.click();
        }
      });
      
      // Functions
      function updateModuleInfo() {
        const module = modules[currentModule];
        totalSlidesEl.textContent = module.slideCount;
        currentSlideNumEl.textContent = currentSlide;
      }

      function updateCourseTitle() {
        const module = modules[currentModule];
        document.querySelector('.course-title').textContent = module.title;
      }
      
      function updateSlideDisplay() {
        const module = modules[currentModule];
        const slideFileName = module.slides[currentSlide - 1];
        
        // Build the path with proper encoding
        const rawPath = `${module.basePath}${slideFileName}`;
        
        // Try different encoding methods
        const paths = [
          rawPath.replace(/ /g, '%20'),  // Manual space encoding
          encodeURI(rawPath),            // Standard URI encoding
          rawPath                        // Raw path (browser might handle it)
        ];
        
        console.log('=== Slide Display Debug ===');
        console.log('Module:', currentModule);
        console.log('Slide:', currentSlide);
        console.log('Raw path:', rawPath);
        console.log('Trying paths:', paths);
        
        let pathIndex = 0;
        
        function tryNextPath() {
          if (pathIndex < paths.length) {
            const currentPath = paths[pathIndex];
            console.log(`Trying path ${pathIndex + 1}:`, currentPath);
            currentSlideEl.src = currentPath;
            pathIndex++;
          } else {
            console.error('❌ All paths failed for slide:', slideFileName);
            currentSlideEl.style.opacity = '1';
          }
        }
        
        currentSlideEl.onload = function() {
          this.style.opacity = '1';
          console.log('✅ Image loaded successfully:', this.src);
        };
        
        currentSlideEl.onerror = function() {
          console.log(`❌ Path failed: ${this.src}`);
          tryNextPath();
        };
        
        // Start with the first path
        currentSlideEl.style.opacity = '0.5';
        tryNextPath();
        
        // Update UI
        currentSlideNumEl.textContent = currentSlide;
        prevBtn.disabled = currentSlide === 1;
        nextBtn.disabled = currentSlide === module.slideCount;
      }
    });

    // Instructor Notes Toggle
    function toggleNotes() {
      const notesContent = document.getElementById('notesContent');
      const notesToggle = document.getElementById('notesToggle');
      
      if (notesContent.classList.contains('expanded')) {
        notesContent.classList.remove('expanded');
        notesToggle.style.transform = 'rotate(0deg)';
      } else {
        notesContent.classList.add('expanded');
        notesToggle.style.transform = 'rotate(180deg)';
      }
    }

    // Logout function
    function logout() {
      localStorage.removeItem('token');
      localStorage.removeItem('role');
      localStorage.removeItem('studentName');
      window.location.replace('/login.html');
    }
  </script>
</body>
</html>