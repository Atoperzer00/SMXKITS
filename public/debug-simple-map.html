<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple Map Debug</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css">
  <style>
    body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }
    #map { width: 100%; height: 600px; border: 2px solid #333; }
    .debug { margin: 20px 0; padding: 10px; background: #f0f0f0; font-family: monospace; }
    .test-images { margin: 20px 0; }
    .test-images img { width: 64px; height: 64px; border: 1px solid #ccc; margin: 5px; }
  </style>
</head>
<body>
  <h1>Simple Map Debug - No Coordinate Transformation</h1>
  
  <div class="test-images">
    <h3>Direct Image Tests:</h3>
    <img src="altis/2/0/0.png" alt="2/0/0" title="altis/2/0/0.png">
    <img src="altis/2/0/1.png" alt="2/0/1" title="altis/2/0/1.png">
    <img src="altis/2/1/0.png" alt="2/1/0" title="altis/2/1/0.png">
    <img src="altis/2/1/1.png" alt="2/1/1" title="altis/2/1/1.png">
  </div>
  
  <div class="debug" id="debug"></div>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
  <script>
    function log(msg) {
      console.log(msg);
      document.getElementById('debug').innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + msg + '</div>';
    }

    log('Starting simple map test...');

    // Try with L.CRS.Simple first
    const map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: 0,
      maxZoom: 6
    });

    log('Map created with L.CRS.Simple');

    const tileLayer = L.tileLayer('altis/{z}/{x}/{y}.png', {
      attribution: 'Altis Map Test',
      tileSize: 256,
      noWrap: true,
      continuousWorld: false
    });

    // Debug tile requests
    tileLayer.on('tileloadstart', function(e) {
      const url = e.tile ? e.tile.src : 'undefined';
      log('🔄 Requesting: ' + url + ' (z=' + e.coords.z + ', x=' + e.coords.x + ', y=' + e.coords.y + ')');
    });

    tileLayer.on('tileload', function(e) {
      const url = e.tile ? e.tile.src : 'undefined';
      log('✅ Loaded: ' + url);
    });

    tileLayer.on('tileerror', function(e) {
      const url = e.tile ? e.tile.src : 'undefined';
      log('❌ Failed: ' + url + ' (z=' + e.coords.z + ', x=' + e.coords.x + ', y=' + e.coords.y + ')');
    });

    tileLayer.addTo(map);

    // Set view to show tiles that we know exist
    map.setView([0, 0], 2);
    log('Map view set to [0, 0] zoom 2');

    // Also try different zoom levels
    setTimeout(() => {
      log('Changing to zoom level 3...');
      map.setZoom(3);
    }, 3000);

    setTimeout(() => {
      log('Changing to zoom level 1...');
      map.setZoom(1);
    }, 6000);
  </script>
</body>
</html>